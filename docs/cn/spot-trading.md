# 现货交易

现货交易是最直接的交易方式，可以通过现货交易买入或者卖出数字货币。买卖双方可以通过 API 在交易所进行下单，交易所的撮合系统按照一定的价格撮合二者成交并收取交易手续费。

**交易对**

一个交易对 symbol 涉及到两类货币：基础货币和计价货币。例如：使用 USDT 买入 BTC，则 USDT 是计价货币，BTC 是基础货币。一般使用基础货币在前，计价货币在后的方式来标记交易对，例如：BTC/USDT, BTC_USDT。目前各大交易所常见的计价货币有 USDT, BTC, ETH。

**交易方向** 

+ 买入：计价货币换基础货币，交易所一般通过扣除一定比例的基础货币来收取手续费。
+ 卖出：基础货币换计价货币，交易所一般通过扣除一定比例的计价货币来收取手续费。

**交易类型**

+ 限价交易(limit)：需要指定交易价格，买入时实际成交价格不会高于指定价格，卖出时实际成交价格不会低于指定价格。
+ 市价交易(market)：按照市场价格（即当前能够买入的最低价或者能够卖出的最高价）进行交易，下单时不需要指定价格。

exunion 在 SpotTradingService 中定义了现货交易的操作，通过 SpotOrder 来定义现货交易订单所涉及的字段。

## 下单

用户可以通过下单(place)操作来买入或卖出加密货币，下单时将字段放入到一个 SpotOrder 实例中。

### 参数

传入一个 SpotOrder 实例作为参数，需要填充的字段说明如下。

| 字段名    | 类型                | 是否必须 | 默认值     | 说明                                           |
| --------- | ------------------- | -------- | ---------- | ---------------------------------------------- |
| symbol    | Symbol              | Y        |            | 交易对                                         |
| side      | SpotOrder.Side      | Y        |            | 交易方向                                       |
| type      | SpotOrder.Type      | N        | Type.LIMIT | 交易类型                                       |
| price     | BigDecimal          | N        |            | 交易价格。限价交易时此字段必须指定             |
| extraInfo | Map<String, Object> | N        |            | 其它字段，通过此参数来传递特定交易所需要的字段 |

### 返回值

返回一个 SpotOrder 实例，实例中必须填充 orderId 字段，其它交易所特有的字段填充到 extraInfo 中。

## 批量下单

一次性下多个订单，部分交易所提供的 API 不支持批量下单，但可以通过多次下单个订单来封装出批量下单的功能，用户在使用 exunon 的 API 时应该注意不同交易所的具体实现。

## 撤销订单

撤销订单操作能够提交一个撤销请求，但并不能保证成功撤销，应该通过订单查询 API 来获取更加准确结果。撤销订单时需要指定订单 ID，部分交易所可能需要指定更多的字段，通过 extraInfo 属性来进行传递。

### 参数

复用 SpotOrder 类作为传入参数，通过 orderId 字段指定要撤销的订单的 ID，若具体的交易所需要额外的字段，可以通过 extraInfo 来传递。

| 字段名    | 类型                | 是否必须 | 默认值 | 说明                                           |
| --------- | ------------------- | -------- | ------ | ---------------------------------------------- |
| orderId   | String              | Y        |        | 要撤销的订单 ID                                |
| extraInfo | Map<String, Object> | N        |        | 其它字段，通过此参数来传递特定交易所需要的字段 |

### 返回值

返回一个 SpotOrderDetails 对象，可以通过订单状态(status)获取撤销请求的结果，最终是否撤销成功应该通过查询 API 来获取，错误信息通过抛出异常来进行传递。

**订单状态**

| 状态（Status）   | 说明                             |
| ---------------- | -------------------------------- |
| NEW              | 订单创建成功                     |
| PARTIALLY_FILLED | 部分完成                         |
| FILLED           | 已经完成                         |
| CANCELED         | 已经撤销                         |
| PENDING_CANCEL   | 正在撤销                         |
| REJECTED         | 已拒绝                           |
| EXPIRED          | 已超时，超时订单一般会被自动撤销 |

## 批量撤销订单

批量撤销一批订单，参数是一个 SpotOrder 列表，返回值是一个 SpotOrderDetails 列表。

## 查询订单详情

查询订单详情允许用户根据订单 ID 查询订单的详细信息。

## 批量查询订单

查询一批订单的详细信息。